var menuId;
var iconId;
var apiWeb = "http://api-admin-warapornsalapao.dosetech.co/";

menuId = window.location.href.split('/')[3].toLowerCase();
$("#menu-" + menuId).addClass("active");

$('input[type="number"]').keypress(function (e) {
    if (!(e.which >= 48 && e.which <= 57)) {
        return false;
    }
});

$(".icon-lang").click(function () {
    if ($(".header").attr('id') == "product") {
        switchLanguageInput($(this).attr("class"), $(this).attr("id"), $(this).attr('productInput'));
    }
    else {
        switchLanguageInput($(this).attr("class"), $(this).attr("id"), "");
    }
});

$(".sub-icon-lang").click(function () {
    switchLanguageInput($(this).attr("class"), $(this).attr("id"), "");
});

function switchLanguageInput(icon, id, productInputId) {
    if (icon.indexOf("icon-lang") == 0) {
        if ($(".header").attr('id') == "product") {
            $(".icon-lang-" + productInputId).addClass("icon-disable");
            $("#" + id).removeClass("icon-disable");
            $(".input-box-" + productInputId).addClass("d-none");
            $("#product-input-" + id).removeClass("d-none");
        }
        else {
            $(".icon-lang").addClass("icon-disable");
            $("#" + id).removeClass("icon-disable");
            $(".summernote-box").addClass("d-none");
            $("#desc-" + id).removeClass("d-none");
        }

        if (id == "en") {
            $(".note-placeholder").html("Enter text here...");
            $("#textarea-box-en").attr("placeholder", "Enter text here...");
        }
        else {
            $(".note-placeholder").html("กรอกข้อมูลที่นี่...");
            $("#textarea-box-th").attr("placeholder", "กรอกข้อมูลที่นี่...");
        }
    }
    else {
        $(".sub-icon-lang").addClass("icon-disable");
        $("#" + id).removeClass("icon-disable");
        $(".input-box").addClass("d-none");
        $("#sub-" + id).removeClass("d-none");

        if (id == "en") {
            $(".input-field").html("Enter text here...");
        }
        else {
            $(".input-field").html("กรอกข้อมูลที่นี่...");
        }
    }
}

$("#product-cat").change(function () {
    var a = $(this).val();
    if (a != "") {
        $("#product-sub").removeClass("d-none");
    }
    else {
        $("#product-sub").addClass("d-none");
    }
});

// upload image section

$(".input-file-upload").change(function (e) {
    readURL(e.target, $(this).attr('id'));
});

var dataInput = [];
var indexImg = 0;
var listyear = [];
var MainId = 0;
var fileTypes = ['jpg', 'jpeg', 'png'];  //acceptable file types

function readURL(input, btn) {
    for (var i = 0; i < input.files.length; i++) {
        if (input.files && input.files[i]) {
            var extension = input.files[i].name.split('.').pop().toLowerCase(),  //file extension from input file
                isSuccess = fileTypes.indexOf(extension) > -1 //is extension in acceptable types
            file = input.files[i];
            var reader = new FileReader();
            if (file.size < 10000000) {
                if (isSuccess && btn == "FileImage") { //yes
                    reader.onload = function (e) {
                        $('.preview-upload').not('#preview-upload-modal').removeClass('d-none').css('background-image', 'url("' + e.target.result + '")');
                        $('.file-name').html(file.name);
                        $('.thumbnail').val(file.name);
                        $('#pictureImg').html(e.target.result);
                    }
                    reader.readAsDataURL(input.files[i]);
                }
                else if (isSuccess && btn == "FileImageModal") { //yes
                    reader.onload = function (e) {
                        $('#preview-upload-modal').removeClass('d-none').css('background-image', 'url("' + e.target.result + '")');
                        $('.file-name-modal').html(file.name);
                        $('#thumbnailmodal').val(file.name);
                        $('#pictureModal').html(e.target.result);
                        $('#btn-save-modal').attr('disabled', false);
                    }
                    reader.readAsDataURL(input.files[i]);
                }
                else {
                    alert('This file type is not supported');
                }
            }
            else {
                alert('This file size is too large')
            }
        }
    }
}